# Next.js ç”»é¢é·ç§»ï¼š4ã¤ã®æ–¹æ³•ã¨ãã®ä½¿ã„åˆ†ã‘

- **å­¦ç¿’æ—¥**: 2025/06/25
- **å­¦ç¿’æ™‚é–“**: 30åˆ†
- **åŠ¹æœå®Ÿæ„Ÿ**: 3/5
- **åŠ¹æœã®ç¨®é¡**: ç†è§£ãŒæ·±ã¾ã£ãŸ

## å†…å®¹

# Next.js ç”»é¢é·ç§»å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼š4ã¤ã®æ–¹æ³•ã¨ãã®ä½¿ã„åˆ†ã‘

Next.jsã§ã®ç”»é¢é·ç§»ã«ã¯è¤‡æ•°ã®æ–¹æ³•ãŒã‚ã‚Šã€ãã‚Œãã‚Œç•°ãªã‚‹ç”¨é€”ã¨ç‰¹å¾´ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€ä¸»è¦ãª4ã¤ã®ç”»é¢é·ç§»æ–¹æ³•ã«ã¤ã„ã¦ã€**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ã„åˆ†ã‘**ã‚‚å«ã‚ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

## ğŸ” ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ vs ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ã„åˆ†ã‘

### ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨å¯èƒ½

- âœ… `<Link />` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- âœ… `redirect()` é–¢æ•°
- âŒ `useRouter()` **ä½¿ç”¨ä¸å¯**

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨å¯èƒ½

- âœ… `<Link />` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- âœ… `useRouter()` ãƒ•ãƒƒã‚¯
- âŒ `redirect()` **ä½¿ç”¨ä¸å¯**ï¼ˆä¾‹å¤–: Server Actionså†…ã§ã¯å¯èƒ½ï¼‰

## 1. `<Link />` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆæ¨å¥¨ãƒ»åŸºæœ¬ï¼‰

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```tsx
import Link from "next/link";

// âœ… ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚ä½¿ç”¨å¯èƒ½
export default function ServerNavigation() {
  return (
    <nav>
      <Link href="/about">Aboutãƒšãƒ¼ã‚¸ã¸</Link>
      <Link href="/contact">ãŠå•ã„åˆã‚ã›</Link>
      <Link href="/blog/123">ãƒ–ãƒ­ã‚°è¨˜äº‹</Link>
    </nav>
  );
}

// âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚ä½¿ç”¨å¯èƒ½
("use client");

export function ClientNavigation() {
  return (
    <nav>
      <Link href="/dashboard">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</Link>
      <Link href="/profile">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</Link>
    </nav>
  );
}
```

### ç‰¹å¾´ã¨ãƒ¡ãƒªãƒƒãƒˆ

- **App Router / Pages Router ä¸¡å¯¾å¿œ**
- **ã‚µãƒ¼ãƒãƒ¼ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸¡æ–¹ã§ä½¿ç”¨å¯èƒ½**
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆCSRï¼‰**ã§é«˜é€Ÿ
- **äº‹å‰ãƒ•ã‚§ãƒƒãƒæ©Ÿèƒ½**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒªãƒ³ã‚¯ã«ãƒ›ãƒãƒ¼ã—ãŸç¬é–“ã«è‡ªå‹•ã§ãƒšãƒ¼ã‚¸ã‚’ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰
- **SEOå¯¾å¿œ**ï¼šé€šå¸¸ã®`<a>`ã‚¿ã‚°ã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã‚‹ãŸã‚ã€æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ãŒãƒªãƒ³ã‚¯ã‚’èªè­˜å¯èƒ½

### å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹

```tsx
// ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã¨çµ„ã¿åˆã‚ã›
<Link
  href="/dashboard"
  className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
>
  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
</Link>

// å‹•çš„ãƒ«ãƒ¼ãƒˆ
<Link href={`/users/${userId}`}>
  ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°
</Link>

// ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ã
<Link href="/search?q=nextjs">
  æ¤œç´¢çµæœ
</Link>
```

### ã„ã¤ä½¿ã†ã¹ãã‹

- **é€šå¸¸ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯**ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ãƒ•ãƒƒã‚¿ãƒ¼ãƒªãƒ³ã‚¯ãªã©ï¼‰
- **ã‚«ãƒ¼ãƒ‰å‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**ã®ã‚¯ãƒªãƒƒã‚¯é ˜åŸŸ
- **ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ**
- **ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**
- **ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**ã§ã®é·ç§»ãŒå¿…è¦ãªå ´åˆ

## 2. `useRouter().push()`ï¼ˆå‹•çš„ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„é·ç§»ï¼‰

> âš ï¸ **é‡è¦**: `useRouter`ã¯**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ã¿**ä½¿ç”¨å¯èƒ½

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```tsx
"use client"; // â† å¿…é ˆï¼

import { useRouter } from "next/navigation"; // â† App Router
// import { useRouter } from 'next/router'; // â† Pages Router ã®å ´åˆ

export function LoginForm() {
  const router = useRouter();

  const handleSubmit = async (formData: FormData) => {
    try {
      await login(formData);
      // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸é·ç§»
      router.push("/dashboard");
    } catch (error) {
      // ã‚¨ãƒ©ãƒ¼å‡¦ç†
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* ãƒ•ã‚©ãƒ¼ãƒ å†…å®¹ */}
      <button type="submit">ãƒ­ã‚°ã‚¤ãƒ³</button>
    </form>
  );
}
```

### ä¸»è¦ãªãƒ¡ã‚½ãƒƒãƒ‰

```tsx
"use client";

const router = useRouter();

// é€šå¸¸ã®é·ç§»ï¼ˆå±¥æ­´ã«è¿½åŠ ï¼‰
router.push("/dashboard");

// å±¥æ­´ã‚’æ®‹ã•ãšã«é·ç§»
router.replace("/success");

// æˆ»ã‚‹
router.back();

// é€²ã‚€
router.forward();

// ç‰¹å®šã®å±¥æ­´ä½ç½®ã«ç§»å‹•
router.go(-2); // 2ã¤å‰ã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹

// ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
router.refresh();
```

### æ¡ä»¶ä»˜ãé·ç§»ã®ä¾‹

```tsx
"use client";

const handleFormSubmit = async (data: FormData) => {
  const result = await submitForm(data);

  if (result.success) {
    // æˆåŠŸæ™‚ã¯å®Œäº†ãƒšãƒ¼ã‚¸ã¸
    router.push("/success");
  } else if (result.needsVerification) {
    // ç¢ºèªãŒå¿…è¦ãªå ´åˆã¯ç¢ºèªãƒšãƒ¼ã‚¸ã¸
    router.push("/verify");
  } else {
    // ã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã«ç•™ã¾ã‚‹
    setError(result.error);
  }
};
```

### ã„ã¤ä½¿ã†ã¹ãã‹

- **ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å¾Œ**ã®é·ç§»
- **æ¡ä»¶ä»˜ãé·ç§»**ï¼ˆèªè¨¼çŠ¶æ…‹ã«ã‚ˆã‚‹åˆ†å²ãªã©ï¼‰
- **éåŒæœŸå‡¦ç†å®Œäº†å¾Œ**ã®é·ç§»
- **ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ãªåˆ¶å¾¡**ãŒå¿…è¦ãªå ´é¢
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**ã«åŸºã¥ãé·ç§»

## 3. `redirect()`ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰

> âš ï¸ **é‡è¦**: `redirect()`ã¯**ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**ã¨**Server Actions**ã§ã®ã¿ä½¿ç”¨å¯èƒ½

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```tsx
// âœ… ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨
// app/protected/page.tsx
import { redirect } from "next/navigation";
import { getCurrentUser } from "@/lib/auth";

export default async function ProtectedPage() {
  const user = await getCurrentUser();

  if (!user) {
    redirect("/login"); // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
  }

  return (
    <div>
      <h1>ä¿è­·ã•ã‚ŒãŸãƒšãƒ¼ã‚¸</h1>
      <p>ã‚ˆã†ã“ãã€{user.name}ã•ã‚“</p>
    </div>
  );
}
```

### å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹

```tsx
// æ¨©é™ãƒã‚§ãƒƒã‚¯ä»˜ãã®ãƒšãƒ¼ã‚¸
export default async function AdminPage() {
  const user = await getCurrentUser();

  if (!user) {
    redirect("/login");
  }

  if (user.role !== "admin") {
    redirect("/unauthorized");
  }

  return <AdminDashboard />;
}

// è¨­å®šã«åŸºã¥ããƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
export default async function UserProfile({
  params,
}: {
  params: { id: string };
}) {
  const user = await getUser(params.id);

  if (!user) {
    redirect("/404");
  }

  if (user.isPrivate) {
    redirect("/private-profile");
  }

  return <UserProfileContent user={user} />;
}
```

### Server Actionsã§ã®ä½¿ç”¨

```tsx
// âœ… Server Actionså†…ã§ã‚‚ä½¿ç”¨å¯èƒ½
// app/actions.ts
import { redirect } from "next/navigation";

export async function createPost(formData: FormData) {
  const title = formData.get("title") as string;
  const content = formData.get("content") as string;

  const post = await savePost({ title, content });

  // ä½œæˆå®Œäº†å¾Œã«æŠ•ç¨¿è©³ç´°ãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
  redirect(`/posts/${post.id}`);
}

// ãƒ•ã‚©ãƒ¼ãƒ ã§ã®ä½¿ç”¨ä¾‹
export function CreatePostForm() {
  return (
    <form action={createPost}>
      <input name="title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" />
      <textarea name="content" placeholder="å†…å®¹" />
      <button type="submit">æŠ•ç¨¿ä½œæˆ</button>
    </form>
  );
}
```

### ç‰¹å¾´

- **ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå°‚ç”¨**
- **Server Actions**ã§ã‚‚ä½¿ç”¨å¯èƒ½
- **HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹307**ï¼ˆTemporary Redirectï¼‰ã‚’è¿”ã™
- **SEOå¯¾å¿œ**ï¼šæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ãŒé©åˆ‡ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’å‡¦ç†
- **ã‚»ã‚­ãƒ¥ã‚¢**ï¼šã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚æ”¹ã–ã‚“ã•ã‚Œãªã„

### ã„ã¤ä½¿ã†ã¹ãã‹

- **èªè¨¼ãƒ»èªå¯ãƒã‚§ãƒƒã‚¯**
- **ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ç¢ºèª**å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- **Server Actions**ã§ã®å‡¦ç†å®Œäº†å¾Œ
- **æ¡ä»¶ã«åŸºã¥ãè‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ**
- **ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®å®‰å…¨ãªé·ç§»**

## 4. `<Link />` ã® replace ãƒ¢ãƒ¼ãƒ‰

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```tsx
import Link from "next/link";

// âœ… ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚ä½¿ç”¨å¯èƒ½
export function PaymentSuccess() {
  return (
    <div>
      <h1>æ±ºæ¸ˆå®Œäº†</h1>
      <p>ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>

      {/* æˆ»ã‚‹ãƒœã‚¿ãƒ³ã§æ±ºæ¸ˆãƒšãƒ¼ã‚¸ã«æˆ»ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ */}
      <Link href="/dashboard" replace>
        ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹
      </Link>
    </div>
  );
}
```

### useRouterã§ã®replaceï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

```tsx
"use client";

const router = useRouter();

const handlePaymentComplete = async () => {
  await processPayment();

  // æ±ºæ¸ˆå®Œäº†å¾Œã€å±¥æ­´ã‚’æ®‹ã•ãšã«å®Œäº†ãƒšãƒ¼ã‚¸ã¸
  router.replace("/payment/success");
};
```

### å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹

```tsx
// ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
"use client";

export function LoginForm() {
  const router = useRouter();

  const handleLogin = async (credentials: LoginData) => {
    const result = await login(credentials);

    if (result.success) {
      // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã€ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã®å±¥æ­´ã‚’æ®‹ã•ãªã„
      router.replace("/dashboard");
    }
  };

  return <form onSubmit={handleLogin}>{/* ãƒ•ã‚©ãƒ¼ãƒ å†…å®¹ */}</form>;
}

// ã‚¹ãƒ†ãƒƒãƒ—å½¢å¼ã®ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
("use client");

export function MultiStepForm() {
  const [step, setStep] = useState(1);
  const router = useRouter();

  const goToNextStep = () => {
    if (step < 3) {
      // å„ã‚¹ãƒ†ãƒƒãƒ—é–“ã§ã¯å±¥æ­´ã‚’æ®‹ã•ãªã„
      router.replace(`/form/step-${step + 1}`);
      setStep(step + 1);
    }
  };

  return (
    <div>
      <h2>ã‚¹ãƒ†ãƒƒãƒ— {step} / 3</h2>
      {/* ã‚¹ãƒ†ãƒƒãƒ—å†…å®¹ */}
      <button onClick={goToNextStep}>æ¬¡ã¸</button>
    </div>
  );
}
```

### ã„ã¤ä½¿ã†ã¹ãã‹

- **æ±ºæ¸ˆãƒ»æ³¨æ–‡å®Œäº†**å¾Œã®ãƒšãƒ¼ã‚¸é·ç§»
- **ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ**å¾Œã®é·ç§»
- **ã‚¹ãƒ†ãƒƒãƒ—å½¢å¼ã®ãƒ•ã‚©ãƒ¼ãƒ **ã§ã®é€²è¡Œ
- **ä¸€æ™‚çš„ãªãƒšãƒ¼ã‚¸**ï¼ˆç¢ºèªç”»é¢ãªã©ï¼‰ã‹ã‚‰ã®é·ç§»

## ğŸ¯ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¨®åˆ¥ã«ã‚ˆã‚‹ä½¿ã„åˆ†ã‘æˆ¦ç•¥

### ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®é·ç§»æˆ¦ç•¥

```tsx
// âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
export default async function ServerPage() {
  const user = await getCurrentUser();

  // èªè¨¼ãƒã‚§ãƒƒã‚¯
  if (!user) {
    redirect("/login"); // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®‰å…¨ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
  }

  return (
    <div>
      <h1>ã‚µãƒ¼ãƒãƒ¼ãƒšãƒ¼ã‚¸</h1>
      {/* é€šå¸¸ã®ãƒªãƒ³ã‚¯ã¯ Link ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */}
      <Link href="/dashboard">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</Link>
      <Link href="/profile" replace>
        ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
      </Link>
    </div>
  );
}
```

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®é·ç§»æˆ¦ç•¥

```tsx
"use client";

export function ClientPage() {
  const router = useRouter();
  const [loading, setLoading] = useState(false);

  const handleComplexNavigation = async () => {
    setLoading(true);
    try {
      const result = await someAsyncOperation();

      if (result.success) {
        router.push("/success");
      } else {
        router.push("/error");
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <div>
      <h1>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒšãƒ¼ã‚¸</h1>
      {/* é™çš„ãªãƒªãƒ³ã‚¯ã¯ Link ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */}
      <Link href="/static-page">é™çš„ãƒšãƒ¼ã‚¸</Link>

      {/* å‹•çš„ãªé·ç§»ã¯ useRouter */}
      <button onClick={handleComplexNavigation} disabled={loading}>
        {loading ? "å‡¦ç†ä¸­..." : "è¤‡é›‘ãªé·ç§»"}
      </button>
    </div>
  );
}
```

### ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã‚µãƒ¼ãƒãƒ¼ + ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰

```tsx
// ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
export default async function HybridPage() {
  const user = await getCurrentUser();

  if (!user) {
    redirect("/login");
  }

  return (
    <div>
      <h1>ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒšãƒ¼ã‚¸</h1>
      {/* ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéƒ¨åˆ†ã®é™çš„ãƒªãƒ³ã‚¯ */}
      <Link href="/dashboard">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</Link>

      {/* ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å§”è­² */}
      <InteractiveSection user={user} />
    </div>
  );
}

// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
("use client");

function InteractiveSection({ user }: { user: User }) {
  const router = useRouter();

  const handleUserAction = async () => {
    // è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯
    const result = await performUserAction(user.id);
    router.push(`/result/${result.id}`);
  };

  return <button onClick={handleUserAction}>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</button>;
}
```

## çŠ¶æ³åˆ¥ãŠã™ã™ã‚ä¸€è¦§

| çŠ¶æ³                         | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¨®åˆ¥ | æ–¹æ³•                                     | ç†ç”±                             |
| ---------------------------- | ------------------ | ---------------------------------------- | -------------------------------- |
| é€šå¸¸ã®ãƒªãƒ³ã‚¯                 | Server/Client      | `<Link href="..." />`                    | SEOå¯¾å¿œã€ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã€é«˜é€Ÿ      |
| èªè¨¼ãƒã‚§ãƒƒã‚¯å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ | Server             | `redirect()`                             | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã€ã‚»ã‚­ãƒ¥ã‚¢         |
| ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å¾Œã®é·ç§»         | Client             | `useRouter().push()`                     | æ¡ä»¶åˆ†å²ã€éåŒæœŸå‡¦ç†å¯¾å¿œ         |
| å±¥æ­´ã‚’æ®‹ã—ãŸããªã„é·ç§»       | Server/Client      | `router.replace()` or `<Link replace />` | UXå‘ä¸Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£             |
| Server Actionå®Œäº†å¾Œ          | Server Action      | `redirect()`                             | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†å¾Œã®å®‰å…¨ãªé·ç§» |
| å¤–éƒ¨ã‚µã‚¤ãƒˆã¸ã®é·ç§»           | Client             | `window.location.href`                   | å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ãƒ•ãƒ«ãƒªãƒ­ãƒ¼ãƒ‰         |

## âš ï¸ ã‚ˆãã‚ã‚‹é–“é•ã„ã¨å¯¾å‡¦æ³•

### 1. ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§useRouterã‚’ä½¿ç”¨

```tsx
// âŒ ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
export default function ServerPage() {
  const router = useRouter(); // Error: useRouter can only be used in Client Components

  return <div>...</div>;
}

// âœ… æ­£ã—ã„æ–¹æ³•
export default async function ServerPage() {
  const user = await getCurrentUser();

  if (!user) {
    redirect("/login"); // ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯redirectã‚’ä½¿ç”¨
  }

  return <div>...</div>;
}
```

### 2. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§redirectã‚’ä½¿ç”¨

```tsx
"use client";

// âŒ ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
export function ClientPage() {
  const handleClick = () => {
    redirect("/dashboard"); // Error: redirect can only be used in Server Components
  };

  return <button onClick={handleClick}>ç§»å‹•</button>;
}

// âœ… æ­£ã—ã„æ–¹æ³•
("use client");

export function ClientPage() {
  const router = useRouter();

  const handleClick = () => {
    router.push("/dashboard"); // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯useRouterã‚’ä½¿ç”¨
  };

  return <button onClick={handleClick}>ç§»å‹•</button>;
}
```

### 3. Server Actionsã§ã®é·ç§»

```tsx
// âœ… Server Actionså†…ã§ã¯redirectãŒä½¿ç”¨å¯èƒ½
export async function submitForm(formData: FormData) {
  const result = await processForm(formData);

  if (result.success) {
    redirect("/success"); // Server Actionså†…ã§ã¯ä½¿ç”¨å¯èƒ½
  }
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è€ƒæ…®äº‹é …

### ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã®åˆ¶å¾¡

```tsx
// ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã‚’ç„¡åŠ¹ã«ã™ã‚‹
<Link href="/heavy-page" prefetch={false}>
  é‡ã„ãƒšãƒ¼ã‚¸
</Link>

// ãƒ›ãƒãƒ¼æ™‚ã®ã¿ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒ
<Link href="/page" prefetch="hover">
  ãƒšãƒ¼ã‚¸
</Link>
```

### å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨çµ„ã¿åˆã‚ã›

```tsx
"use client";

const router = useRouter();

const navigateToHeavyPage = async () => {
  // å¿…è¦ãªæ™‚ã ã‘ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’èª­ã¿è¾¼ã‚€
  const { HeavyComponent } = await import("./HeavyComponent");
  router.push("/heavy-page");
};
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```tsx
"use client";

const router = useRouter();

const handleNavigation = async (path: string) => {
  try {
    await router.push(path);
  } catch (error) {
    console.error("Navigation failed:", error);
    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
    window.location.href = path;
  }
};
```

## ã¾ã¨ã‚

Next.jsã®ç”»é¢é·ç§»ã¯ã€**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¨®åˆ¥**ã¨**ç”¨é€”**ã«å¿œã˜ã¦é©åˆ‡ãªæ–¹æ³•ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ï¼š

### ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯

1. **`<Link />`** - åŸºæœ¬çš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
2. **`redirect()`** - èªè¨¼ãƒã‚§ãƒƒã‚¯ã‚„æ¡ä»¶åˆ†å²ã§ã®å®‰å…¨ãªé·ç§»

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯

1. **`<Link />`** - é™çš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
2. **`useRouter().push()`** - ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ãªåˆ¶å¾¡
3. **`replace`ãƒ¢ãƒ¼ãƒ‰** - å±¥æ­´ã‚’æ®‹ã•ãªã„é·ç§»

### Server Actionsã§ã¯

1. **`redirect()`** - ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†å®Œäº†å¾Œã®é·ç§»

ã“ã‚Œã‚‰ã‚’é©åˆ‡ã«ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ã§ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹**ã€**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ã€**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**ã®å…¨ã¦ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç‰¹ã«App Routerã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¢ƒç•Œã‚’æ„è­˜ã—ãŸè¨­è¨ˆãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚