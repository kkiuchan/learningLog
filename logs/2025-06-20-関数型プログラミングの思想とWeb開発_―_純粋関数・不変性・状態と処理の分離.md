# 関数型プログラミングの思想とWeb開発 ― 純粋関数・不変性・状態と処理の分離

- **学習日**: 2025/06/19
- **学習時間**: 20分
- **効果実感**: 3/5
- **効果の種類**: 理解が深まった

## 内容



# 関数型プログラミングの思想とWeb開発 ― 純粋関数・不変性・状態と処理の分離

## はじめに

ReactやNext.js、モダンなJavaScript開発では「関数型プログラミング（FP）」の考え方が多く取り入れられています。  
この記事では、**関数型プログラミングの重要な思想**を、前回の「イミュータビリティ」や「純粋関数」などのキーワードと絡めて解説します。

---

## 1. 関数型プログラミングとは？

関数型プログラミングは、**「関数」を中心に据えたプログラミングパラダイム**です。  
副作用を最小限に抑え、**データの不変性（イミュータビリティ）**や**純粋関数**を重視します。

---

## 2. 純粋関数（Pure Function）とは？

### 純粋関数の定義

- **同じ入力には必ず同じ出力を返す**
- **外部の状態に依存しない**
- **外部の状態を変更しない（副作用がない）**

### 例：純粋関数
```js
function add(a, b) {
  return a + b;
}
```
- 入力が同じなら、出力も常に同じ
- 外部の変数や状態を参照・変更しない

### 例：不純な関数（副作用あり）
```js
let count = 0;
function increment() {
  count += 1; // 外部状態を変更している
  return count;
}
```
- 外部の`count`に依存し、呼ぶたびに結果が変わる

---

## 3. 不変性（イミュータビリティ）の重要性

前回の記事でも触れた通り、**イミュータビリティ（不変性）**は「値を直接変更せず、新しい値を生成する」考え方です。

### なぜ不変性が大事なのか？

- **純粋関数を実現しやすくなる**  
  → 関数の外部状態を変更しないため
- **状態の追跡・デバッグが容易**  
  → どこで値が変わったかが明確
- **バグの予防**  
  → 予期せぬ副作用を防げる

### 例：イミュータブルな配列操作
```js
const arr = [1, 2, 3];
const newArr = arr.map(x =&gt; x * 2); // arrはそのまま
```

---

## 4. 状態と処理の分離

関数型プログラミングでは、**「状態（データ）」と「処理（ロジック）」を分離する**ことが推奨されます。

### どういうこと？

- **状態（データ）**はできるだけ外部から渡す
- **処理（関数）**は状態を受け取り、結果を返すだけにする
- 状態の変更は「新しい値を返す」ことで表現する

### Reactでの例

```js
// 状態（state）はuseStateで管理
const [count, setCount] = useState(0);

// 処理（関数）は純粋に
function increment(x) {
  return x + 1;
}

// 状態の更新もイミュータブルに
setCount(prev =&gt; increment(prev));
```

---

## 5. 副作用（Side Effect）との付き合い方

関数型プログラミングでは、**副作用を最小限にし、明示的に管理する**ことが重要です。

- 副作用とは：**外部の状態を変更したり、外部の状態に依存する処理**
  - 例：API通信、DOM操作、ファイル書き込み、ランダム値の生成など
- Reactでは`useEffect`などで**副作用を明示的に分離**する

---

## 6. Web開発での実践ポイント

- **ロジックはできるだけ純粋関数で書く**
- **状態の更新はイミュータブルに（新しい値を返す）**
- **副作用はuseEffectやAPI層など、明示的な場所にまとめる**
- **状態と処理を分離し、テストしやすい設計にする**

---

## まとめ

- **関数型プログラミングの思想**は、現代のWeb開発（React/Next.js/状態管理）で非常に重要
- **純粋関数・イミュータビリティ・状態と処理の分離**を意識することで、バグの少ない・保守性の高いコードが書ける
- 副作用は最小限に、明示的に管理しよう

---

**イミュータビリティや純粋関数を意識した設計で、より安全で予測可能なアプリ開発を目指しましょう！**

---

ご質問や「このケースはどう設計すべき？」などあれば、ぜひコメントください！